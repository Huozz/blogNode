webpackJsonp([0],{"7zZ7":function(e,s){},LGbv:function(e,s,n){"use strict";var o=n("Dd8w"),t=n.n(o),r=n("NYxO"),a={data:function(){return{show:!1,userInfo:{name:"",password:""},hasName:!1,closeFunc:null}},computed:t()({},Object(r.b)(["githubUsername"])),methods:{open:function(){this.show=!0},signUp:function(){var e=this,s=this;this.userInfo.name.length<6?this.$message.error("用户名不能为空或小于六个字符"):this.userInfo.password.length<6?this.$message.error("密码不能为空或小于六个字符"):this.$http.get("/api/admin/getUser/"+this.userInfo.name).then(function(n){if(n.body.name===s.userInfo.name)s.$message.error("该用户已存在"),s.userInfo.name="";else{var o={name:s.userInfo.name,password:s.userInfo.password};s.$http.post("/api/admin/signup",{userInfo:o}).then(function(n){s.$message({message:"注册成功",type:"success"}),e.show=!1},function(e){return console.log("注册失败"+e)})}})},signIn:function(){var e=this,s=this;this.userInfo.name.length<6?this.$message.error("用户名不能为空或小于六个字符"):this.userInfo.password.length<6?this.$message.error("密码不能为空或小于六个字符"):this.$http.get("/api/admin/getUser/"+this.userInfo.name).then(function(n){if(s.userInfo.password!==n.body.password)s.$message.error("用户名或密码不正确");else{var o={name:s.userInfo.name,password:s.userInfo.password};window.sessionStorage.setItem("token",s.userInfo.name+"asdf"),s.$store.dispatch("Authentic",window.sessionStorage.getItem("token")),s.$http.post("/api/admin/signin",{userInfo:o}).then(function(n){s.$message({message:"登录成功",type:"success"}),console.log("登录的response",n),delete s.userInfo.password,e.show=!1},function(e){return console.log("登录失败"+e)})}},function(e){s.$message.error("该用户不存在")})}}},i={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",[n("el-dialog",{attrs:{title:"登录/注册",visible:e.show},on:{"update:visible":function(s){e.show=s}}},[n("el-form",{ref:"tokenForm",model:{value:e.userInfo,callback:function(s){e.userInfo=s},expression:"userInfo"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.userInfo.name,callback:function(s){e.$set(e.userInfo,"name",s)},expression:"userInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.userInfo.password,callback:function(s){e.$set(e.userInfo,"password",s)},expression:"userInfo.password"}})],1)],1),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.signUp}},[e._v("注册")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.signIn}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(a,i,!1,function(e){n("7zZ7")},"data-v-3bd99e7c",null);s.a=u.exports},zXdv:function(e,s,n){"use strict";n("vLgD"),n("IcnI")}});
//# sourceMappingURL=0.ac0c6cdc6e993e2b7ccf.js.map