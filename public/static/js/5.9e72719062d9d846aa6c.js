webpackJsonp([5],{"0XvF":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("Dd8w"),n=o.n(i),r=o("NYxO"),l=o("LGbv"),a=(o("zXdv"),o("oAV5")),s={data:function(){return{form:{title:"",description:"",content:"",date:""},submitButton:{loading:!1,disabled:!1},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{type:"string",max:32,message:"标题长度不超过32个字符",trigger:"change"}],description:[{required:!0,message:"请输入简要描述",trigger:"blur"}],content:[{required:!0,message:"请输入博客正文",trigger:"blur"}]},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},components:{TokenDialog:l.a},computed:n()({},Object(r.b)(["token"])),methods:{imgAdd:function(e,t){var o=this;console.log(t),console.log("base_api","http://localhost:3000/");var i=new FormData;i.append("file",t),a.a.uploadImage(i).then(function(t){o.$refs.md.$img2Url(e,"http://localhost:3000/"+t.data.url)}).catch(function(e){console.log(e)})},change:function(e,t){this.form.content=t},onSubmit:function(){this.publish()},publish:function(){var e=this,t=this;this.$refs.form.validate(function(o){o&&(e.submitButton.loading=!0,e.submitButton.disabled=!0,e.form.date=a.a.getDate(),e.$http.post("/api/admin/saveArticle",{articleInformation:e.form}).then(function(e){t.$message({message:"更新文章成功",type:"success"}),t.$router.push("/user/blog/main")},function(e){return console.log(e)}))})}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{minheight:"600px"}},[o("el-card",{attrs:{shadow:"never"}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述",prop:"description"}},[o("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"博客正文",prop:"content"}},[o("mavon-editor",{ref:"md",staticStyle:{"max-height":"500px"},attrs:{subfield:!1,toolbars:e.toolbars},on:{imgAdd:e.imgAdd,change:e.change},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",loading:e.submitButton.loading,disabled:e.submitButton.disabled},on:{click:e.onSubmit}},[e._v("发表")])],1)],1)],1),e._v(" "),o("token-dialog",{ref:"tokenDialog"})],1)},staticRenderFns:[]};var u=o("VU/8")(s,c,!1,function(e){o("RJKm")},"data-v-4c6438fd",null);t.default=u.exports},RJKm:function(e,t){}});
//# sourceMappingURL=5.9e72719062d9d846aa6c.js.map